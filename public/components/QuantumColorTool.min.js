class QuantumColorTool{constructor(e){this.container=document.getElementById(e),this.colors=[],this.init()}init(){this.container.innerHTML='\n      <div class="tool-card">\n        <div class="tool-header">\n          <h2>üé® Quantum Color Generator</h2>\n          <p class="tool-description">Generate beautiful random colors using quantum entropy for design and art projects</p>\n        </div>\n        \n        <div class="tool-controls">\n          <div class="control-row space-y-6 mb-6">\n            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">\n              <div class="input-group">\n                <label for="color-count" class="block text-sm font-bold text-gray-700 mb-1">Number of Colors</label>\n                <input type="number" id="color-count" value="8" min="1" max="24"\n                  class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm text-gray-800 font-mono">\n                <span class="text-xs text-gray-500 mt-1 block">1-24 colors</span>\n              </div>\n              \n              <div class="input-group">\n                <label for="color-format" class="block text-sm font-bold text-gray-700 mb-1">Output Format</label>\n                <select id="color-format" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm bg-white text-gray-800">\n                  <option value="hex">Hex (#RRGGBB)</option>\n                  <option value="rgb">RGB (r, g, b)</option>\n                  <option value="hsl">HSL (h, s%, l%)</option>\n                  <option value="css">CSS Variables</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          \n          <div class="control-row flex flex-wrap gap-6 mb-6">\n            <div class="checkbox-group flex items-center gap-2">\n              <input type="checkbox" id="bright-colors" class="w-5 h-5 text-quantum-light rounded border-gray-300 focus:ring-quantum-light" />\n              <label for="bright-colors" class="font-medium text-gray-700 cursor-pointer">Favor bright colors</label>\n            </div>\n            \n            <div class="checkbox-group flex items-center gap-2">\n              <input type="checkbox" id="avoid-grays" class="w-5 h-5 text-quantum-light rounded border-gray-300 focus:ring-quantum-light" />\n              <label for="avoid-grays" class="font-medium text-gray-700 cursor-pointer">Avoid gray tones</label>\n            </div>\n            \n            <div class="checkbox-group flex items-center gap-2">\n              <input type="checkbox" id="harmonious" class="w-5 h-5 text-quantum-light rounded border-gray-300 focus:ring-quantum-light" />\n              <label for="harmonious" class="font-medium text-gray-700 cursor-pointer">Harmonious palette</label>\n            </div>\n          </div>\n          \n          <button id="generate-colors" class="generate-btn">\n            <span class="btn-icon">üé®</span>\n            Generate Colors\n          </button>\n        </div>\n        \n        <div class="tool-results">\n          <div id="color-loading" class="loading hidden">\n            <div class="spinner"></div>\n            <p>Creating quantum palette...</p>\n          </div>\n          \n          <div id="color-error" class="error hidden">\n            <div class="error-icon">‚ö†Ô∏è</div>\n            <div class="error-content">\n              <h4>Error</h4>\n              <p id="color-error-message"></p>\n            </div>\n          </div>\n          \n          <div id="color-success" class="success hidden">\n            <div class="result-header">\n              <h3>üé® Quantum Color Palette</h3>\n              <div class="result-actions">\n                <button id="copy-palette" class="copy-btn">üìã Copy Palette</button>\n                <button id="export-palette" class="download-btn">üíæ Export</button>\n                <button id="regenerate-colors" class="secondary-btn">üîÑ New Palette</button>\n              </div>\n            </div>\n            \n            <div class="color-palette" id="color-palette">\n              \x3c!-- Color swatches will be populated here --\x3e\n            </div>\n            \n            <div class="palette-formats" id="palette-formats">\n              \x3c!-- Different format outputs will be shown here --\x3e\n            </div>\n          </div>\n          \n          <div class="color-uses-section">\n            <h3>üñåÔ∏è Use Cases</h3>\n            <div class="use-cases-grid">\n              <div class="use-case">\n                <h4>üé® Design Projects</h4>\n                <p>Generate unique color schemes for web design, branding, and digital art</p>\n              </div>\n              <div class="use-case">\n                <h4>üè† Interior Design</h4>\n                <p>Discover unexpected color combinations for room palettes and decor</p>\n              </div>\n              <div class="use-case">\n                <h4>üëï Fashion & Style</h4>\n                <p>Create bold outfit color combinations and fashion inspiration</p>\n              </div>\n              <div class="use-case">\n                <h4>üñºÔ∏è Art & Creativity</h4>\n                <p>Break creative blocks with truly random color inspirations</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',this.bindEvents()}bindEvents(){const e=this.container.querySelector("#generate-colors"),t=this.container.querySelector("#regenerate-colors"),o=this.container.querySelector("#copy-palette"),r=this.container.querySelector("#export-palette");e.addEventListener("click",()=>this.generateColors()),t.addEventListener("click",()=>this.generateColors()),o.addEventListener("click",()=>this.copyPalette()),r.addEventListener("click",()=>this.exportPalette()),this.container.querySelector("#color-count").addEventListener("keypress",e=>{"Enter"===e.key&&this.generateColors()})}async generateColors(){const e=parseInt(this.container.querySelector("#color-count").value),t=this.container.querySelector("#bright-colors").checked,o=this.container.querySelector("#avoid-grays").checked,r=this.container.querySelector("#harmonious").checked;if(isNaN(e)||e<1||e>24)this.showError("Number of colors must be between 1 and 24");else{this.showLoading();try{const n=await qrngService.getHex16(e);this.colors=n.map((e,n)=>{let s=this.hexToColor(e,t,o);return r&&n>0&&(s=this.makeHarmonious(s,this.colors[0])),s}),this.showResults(),qrngService.emit("tool_usage",{tool:"color_generator",count:e,bright_colors:t,avoid_grays:o,harmonious:r})}catch(e){console.error("Color generation error:",e),this.showError(`Failed to generate colors: ${e.message}`)}}}hexToColor(e,t=!1,o=!1){const r=e.padEnd(6,"0").substring(0,6);let n=parseInt(r.substring(0,2),16),s=parseInt(r.substring(2,4),16),a=parseInt(r.substring(4,6),16);if(t){const e=Math.max(n,s,a);if(e<128){const t=(128+.7*(255-e))/e;n=Math.min(255,Math.round(n*t)),s=Math.min(255,Math.round(s*t)),a=Math.min(255,Math.round(a*t))}}if(o){const e=(n+s+a)/3;if(Math.max(Math.abs(n-e),Math.abs(s-e),Math.abs(a-e))<30){const e=n>s&&n>a?"r":s>a?"g":"b";"r"===e?n=Math.min(255,n+50):"g"===e?s=Math.min(255,s+50):a=Math.min(255,a+50)}}const i=`#${n.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`.toUpperCase();return{r:n,g:s,b:a,hex:i,rgb:`rgb(${n}, ${s}, ${a})`,hsl:this.rgbToHsl(n,s,a),name:this.getColorName(n,s,a)}}rgbToHsl(e,t,o){e/=255,t/=255,o/=255;const r=Math.max(e,t,o),n=Math.min(e,t,o);let s,a,i=(r+n)/2;if(r===n)s=a=0;else{const c=r-n;switch(a=i>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-o)/c+(t<o?6:0);break;case t:s=(o-e)/c+2;break;case o:s=(e-t)/c+4}s/=6}return`hsl(${Math.round(360*s)}, ${Math.round(100*a)}%, ${Math.round(100*i)}%)`}makeHarmonious(e,t){const o=this.getHue(t),r=(this.getHue(e),[30,60,120,180]),n=(o+r[Math.floor(Math.random()*r.length)])%360;return this.adjustHue(e,n)}getHue(e){const t=e.hsl.match(/\d+/g);return parseInt(t[0])}adjustHue(e,t){const{r:o,g:r,b:n}=e;return e}getColorName(e,t,o){return e>t&&e>o?e>200?t>100||o>100?"Warm":"Red":"Maroon":t>o?t>200?e>100||o>100?"Bright":"Green":"Forest":o>200?e>100||t>100?"Cool":"Blue":"Navy"}showResults(){const e=this.container.querySelector("#color-palette"),t=this.container.querySelector("#palette-formats"),o=this.container.querySelector("#color-format").value;e.innerHTML=this.colors.map((e,t)=>`\n      <div class="color-swatch" style="background-color: ${e.hex}">\n        <div class="color-info">\n          <div class="color-value">${this.formatColorValue(e,o)}</div>\n          <div class="color-name">${e.name}</div>\n        </div>\n        <button class="copy-color-btn" data-color="${this.formatColorValue(e,o)}" title="Copy this color">\n          üìã\n        </button>\n      </div>\n    `).join(""),e.querySelectorAll(".copy-color-btn").forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation(),this.copyColor(e.target.dataset.color)})});const r=this.colors.map((e,t)=>`--color-${t+1}: ${e.hex};`).join("\n"),n=`const colors = [${this.colors.map(e=>`"${e.hex}"`).join(", ")}];`;t.innerHTML=`\n      <div class="format-output bg-gray-50 rounded-lg p-4 border border-gray-200">\n        <div class="flex justify-between items-center mb-2">\n            <h4 class="font-bold text-gray-700 text-sm uppercase tracking-wider">CSS Variables</h4>\n            <button class="copy-format-btn text-xs flex items-center gap-1 bg-white hover:bg-gray-100 text-gray-600 border border-gray-200 px-3 py-1.5 rounded transition-all shadow-sm active:scale-95" data-type="css">\n                <span>üìã</span> Copy\n            </button>\n        </div>\n        <pre class="bg-gray-800 text-gray-100 p-3 rounded-md text-xs font-mono overflow-x-auto max-h-48 custom-scrollbar"><code id="css-code">${r}</code></pre>\n      </div>\n      \n      <div class="format-output bg-gray-50 rounded-lg p-4 border border-gray-200">\n        <div class="flex justify-between items-center mb-2">\n            <h4 class="font-bold text-gray-700 text-sm uppercase tracking-wider">Array Format</h4>\n             <button class="copy-format-btn text-xs flex items-center gap-1 bg-white hover:bg-gray-100 text-gray-600 border border-gray-200 px-3 py-1.5 rounded transition-all shadow-sm active:scale-95" data-type="array">\n                <span>üìã</span> Copy\n            </button>\n        </div>\n        <pre class="bg-gray-800 text-gray-100 p-3 rounded-md text-xs font-mono whitespace-pre-wrap break-all"><code id="array-code">${n}</code></pre>\n      </div>\n    `,t.querySelectorAll(".copy-format-btn").forEach(e=>{e.addEventListener("click",e=>{const t="css"===e.currentTarget.dataset.type?r:n;this.copyToClipboard(t,e.currentTarget)})}),this.container.querySelector("#color-success").classList.remove("hidden"),this.container.querySelector("#color-loading").classList.add("hidden"),this.container.querySelector("#color-error").classList.add("hidden"),this.container.querySelector("#generate-colors").disabled=!1}async copyToClipboard(e,t){try{await navigator.clipboard.writeText(e);const o=t.innerHTML;t.innerHTML="<span>‚úÖ</span> Copied!",t.classList.add("text-green-600","border-green-200","bg-green-50"),setTimeout(()=>{t.innerHTML=o,t.classList.remove("text-green-600","border-green-200","bg-green-50")},2e3)}catch(e){console.error("Failed to copy",e)}}formatColorValue(e,t){switch(t){case"rgb":return e.rgb;case"hsl":return e.hsl;case"css":return`--color: ${e.hex}`;default:return e.hex}}async copyPalette(){const e=this.container.querySelector("#color-format").value,t=this.colors.map(t=>this.formatColorValue(t,e)).join("\n");try{await navigator.clipboard.writeText(t),this.showCopyFeedback(this.container.querySelector("#copy-palette"))}catch(e){console.error("Copy failed:",e)}}async copyColor(e){try{await navigator.clipboard.writeText(e);const t=this.container.querySelector(`[data-color="${e}"]`);this.showCopyFeedback(t)}catch(e){console.error("Copy failed:",e)}}showCopyFeedback(e){const t=e.textContent;e.textContent="‚úÖ",e.style.background="rgba(16, 185, 129, 0.9)",setTimeout(()=>{e.textContent=t,e.style.background=""},1500)}exportPalette(){const e=`Quantum Color Palette\nGenerated: ${(new Date).toISOString()}\nColors: ${this.colors.length}\nSource: ANU Quantum Random Number Generator\n\nHEX VALUES:\n${this.colors.map((e,t)=>`${t+1}. ${e.hex} (${e.name})`).join("\n")}\n\nRGB VALUES:\n${this.colors.map((e,t)=>`${t+1}. ${e.rgb}`).join("\n")}\n\nHSL VALUES:\n${this.colors.map((e,t)=>`${t+1}. ${e.hsl}`).join("\n")}\n\nCSS VARIABLES:\n${this.colors.map((e,t)=>`--color-${t+1}: ${e.hex};`).join("\n")}\n\nJAVASCRIPT ARRAY:\nconst quantumColors = [${this.colors.map(e=>`"${e.hex}"`).join(", ")}];\n\n---\nGenerated using quantum entropy for true randomness\nPerfect for design, art, and creative projects`,t=new Blob([e],{type:"text/plain"}),o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=`quantum-color-palette-${Date.now()}.txt`,r.click(),URL.revokeObjectURL(o)}showLoading(){this.container.querySelector("#color-loading").classList.remove("hidden"),this.container.querySelector("#color-error").classList.add("hidden"),this.container.querySelector("#color-success").classList.add("hidden"),this.container.querySelector("#generate-colors").disabled=!0}showError(e){this.container.querySelector("#color-error-message").textContent=e,this.container.querySelector("#color-error").classList.remove("hidden"),this.container.querySelector("#color-loading").classList.add("hidden"),this.container.querySelector("#color-success").classList.add("hidden"),this.container.querySelector("#generate-colors").disabled=!1}}window.QuantumColorTool=QuantumColorTool;