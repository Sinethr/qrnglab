class QuantumHexTool{constructor(e){this.container=document.getElementById(e),this.results=[],this.init()}init(){this.container.innerHTML='\n      <div class="tool-card">\n        <div class="tool-header">\n          <h2>üî§ Quantum Hex Generator</h2>\n          <p class="tool-description">Generate cryptographic-quality hexadecimal tokens and keys</p>\n        </div>\n        \n        <div class="tool-controls">\n          <div class="control-row space-y-6 mb-6">\n            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">\n              <div class="input-group">\n                <label for="hex-type" class="block text-sm font-bold text-gray-700 mb-1">Hex Type</label>\n                <select id="hex-type" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm bg-white text-gray-800">\n                  <option value="hex8">8-bit Hex (2 chars)</option>\n                  <option value="hex16" selected>16-bit Hex (4 chars)</option>\n                </select>\n              </div>\n              \n              <div class="input-group">\n                <label for="hex-length" class="block text-sm font-bold text-gray-700 mb-1">Number of Tokens</label>\n                <input type="number" id="hex-length" value="8" min="1" max="50"\n                  class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm text-gray-800 font-mono">\n                <span class="text-xs text-gray-500 mt-1 block">1-50 tokens</span>\n              </div>\n              \n              <div class="input-group">\n                <label for="hex-size" class="block text-sm font-bold text-gray-700 mb-1">Block Size</label>\n                <input type="number" id="hex-size" value="1" min="1" max="16"\n                  class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm text-gray-800 font-mono">\n                <span class="text-xs text-gray-500 mt-1 block">Quantum blocks per token</span>\n              </div>\n            </div>\n          </div>\n          \n          <div class="control-row flex flex-wrap gap-6 mb-6">\n            <div class="checkbox-group flex items-center gap-2">\n              <input type="checkbox" id="hex-uppercase" checked class="w-5 h-5 text-quantum-light rounded border-gray-300 focus:ring-quantum-light" />\n              <label for="hex-uppercase" class="font-medium text-gray-700 cursor-pointer">Uppercase</label>\n            </div>\n            \n            <div class="checkbox-group flex items-center gap-2">\n              <input type="checkbox" id="hex-prefix" class="w-5 h-5 text-quantum-light rounded border-gray-300 focus:ring-quantum-light" />\n              <label for="hex-prefix" class="font-medium text-gray-700 cursor-pointer">Add 0x prefix</label>\n            </div>\n            \n            <div class="checkbox-group flex items-center gap-2">\n              <input type="checkbox" id="hex-separators" class="w-5 h-5 text-quantum-light rounded border-gray-300 focus:ring-quantum-light" />\n              <label for="hex-separators" class="font-medium text-gray-700 cursor-pointer">Add separators</label>\n            </div>\n          </div>\n          \n          <button id="generate-hex" class="generate-btn">\n            <span class="btn-icon">üîê</span>\n            Generate Hex Tokens\n          </button>\n        </div>\n        \n        <div class="tool-results">\n          <div id="hex-loading" class="loading hidden">\n            <div class="spinner"></div>\n            <p>Generating quantum entropy...</p>\n          </div>\n          \n          <div id="hex-error" class="error hidden">\n            <div class="error-icon">‚ö†Ô∏è</div>\n            <div class="error-content">\n              <h4>Error</h4>\n              <p id="hex-error-message"></p>\n            </div>\n          </div>\n          \n          <div id="hex-success" class="success hidden">\n            <div class="result-header">\n              <h3>Hex Tokens</h3>\n              <div class="result-actions">\n                <button id="copy-all-hex" class="copy-btn">üìã Copy All</button>\n                <button id="download-hex" class="download-btn">üíæ Download</button>\n              </div>\n            </div>\n            \n            <div class="result-metadata">\n              <span class="metadata-item">Type: <strong id="hex-type-display"></strong></span>\n              <span class="metadata-item">Count: <strong id="hex-count-display"></strong></span>\n              <span class="metadata-item">Size: <strong id="hex-size-display"></strong></span>\n              <span class="metadata-item">Entropy: <strong id="hex-entropy-display"></strong></span>\n            </div>\n            \n            <div class="hex-results-grid" id="hex-results-list">\n              \x3c!-- Results will be populated here --\x3e\n            </div>\n            \n            <div class="security-notice">\n              <h4>üîí Security Notice</h4>\n              <p>These tokens use quantum entropy and are suitable for cryptographic purposes. \n                 However, for production systems, always use established cryptographic libraries \n                 and consult security experts.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',this.bindEvents()}bindEvents(){const e=this.container.querySelector("#generate-hex"),t=this.container.querySelector("#copy-all-hex"),n=this.container.querySelector("#download-hex"),s=this.container.querySelector("#hex-type");e.addEventListener("click",()=>this.generateHex()),t.addEventListener("click",()=>this.copyAllResults()),n.addEventListener("click",()=>this.downloadResults()),s.addEventListener("change",()=>this.updateSizeHint()),this.container.querySelectorAll("input").forEach(e=>{e.addEventListener("keypress",e=>{"Enter"===e.key&&this.generateHex()})}),this.updateSizeHint()}updateSizeHint(){const e=this.container.querySelector("#hex-type").value,t=this.container.querySelector("#hex-size").nextElementSibling;t.textContent="hex8"===e?"1 block = 2 hex chars":"1 block = 4 hex chars"}async generateHex(){const e=this.container.querySelector("#hex-type").value,t=parseInt(this.container.querySelector("#hex-length").value),n=parseInt(this.container.querySelector("#hex-size").value),s=this.container.querySelector("#hex-uppercase").checked,r=this.container.querySelector("#hex-prefix").checked,o=this.container.querySelector("#hex-separators").checked;if(isNaN(t)||t<1||t>50)this.showError("Number of tokens must be between 1 and 50");else if(isNaN(n)||n<1||n>16)this.showError("Block size must be between 1 and 16");else{this.showLoading();try{const a=await qrngService.getQuantumData(e,t,n);this.results=a.map(e=>{let t=e;return t=s?t.toUpperCase():t.toLowerCase(),r&&(t="0x"+t),t}),o&&this.results.length>1?this.formattedResults=this.results.join(s?"-":":"):this.formattedResults=this.results.join("\n"),this.showResults(e,t,n),qrngService.emit("tool_usage",{tool:"hex",type:e,length:t,size:n,entropy_bits:this.calculateEntropy(e,t,n)})}catch(e){console.error("Hex generation error:",e),this.showError(`Failed to generate hex tokens: ${e.message}`)}}}calculateEntropy(e,t,n){return("hex8"===e?8*n:16*n)*t}showResults(e,t,n){this.container.querySelector("#hex-type-display").textContent="hex8"===e?"8-bit Hex":"16-bit Hex",this.container.querySelector("#hex-count-display").textContent=t,this.container.querySelector("#hex-size-display").textContent=n,this.container.querySelector("#hex-entropy-display").textContent=`${this.calculateEntropy(e,t,n)} bits`;const s=this.container.querySelector("#hex-results-list");s.innerHTML="",this.results.forEach((e,t)=>{const n=document.createElement("div");n.className="hex-result-item",n.innerHTML=`\n        <div class="hex-token-display">\n          <code class="hex-token">${e}</code>\n        </div>\n        <div class="hex-token-actions">\n          <button class="copy-token-btn" data-token="${e}" title="Copy this token">\n            üìã\n          </button>\n          <span class="token-length">${e.replace("0x","").length} chars</span>\n        </div>\n      `,n.querySelector(".copy-token-btn").addEventListener("click",e=>{this.copyToken(e.target.dataset.token)}),s.appendChild(n)}),this.container.querySelector("#hex-success").classList.remove("hidden"),this.container.querySelector("#hex-loading").classList.add("hidden"),this.container.querySelector("#hex-error").classList.add("hidden"),this.container.querySelector("#generate-hex").disabled=!1}async copyAllResults(){try{await navigator.clipboard.writeText(this.formattedResults),this.showCopyFeedback(this.container.querySelector("#copy-all-hex"))}catch(e){console.error("Copy failed:",e)}}async copyToken(e){try{await navigator.clipboard.writeText(e);const t=this.container.querySelector(`[data-token="${e}"]`);this.showCopyFeedback(t)}catch(e){console.error("Copy failed:",e)}}showCopyFeedback(e){const t=e.textContent;e.textContent="‚úÖ",e.style.background="#10b981",setTimeout(()=>{e.textContent=t,e.style.background=""},1500)}downloadResults(){const e=this.container.querySelector("#hex-type").value,t=this.results.length,n=parseInt(this.container.querySelector("#hex-size").value),s=`Quantum Hex Tokens\nGenerated: ${(new Date).toISOString()}\nType: ${"hex8"===e?"8-bit":"16-bit"} Hex\nCount: ${t}\nBlock Size: ${n}\nTotal Entropy: ${this.calculateEntropy(e,t,n)} bits\n\nTokens:\n${this.results.map((e,t)=>`${(t+1).toString().padStart(2,"0")}. ${e}`).join("\n")}\n\nSecurity Information:\n- Generated using ANU Quantum Random Number Generator\n- Suitable for cryptographic applications\n- Each ${e} token provides ${"hex8"===e?8*n:16*n} bits of entropy\n- Total randomness: ${this.calculateEntropy(e,t,n)} bits\n\nDisclaimer:\nWhile these tokens use genuine quantum entropy, always consult\nsecurity experts and use established cryptographic libraries\nfor production systems requiring high security.\n\n---\nGenerated by Quantum Random Lab\nSource: https://quantumnumbers.anu.edu.au/`,r=new Blob([s],{type:"text/plain"}),o=URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`quantum-hex-tokens-${Date.now()}.txt`,a.click(),URL.revokeObjectURL(o)}showLoading(){this.container.querySelector("#hex-loading").classList.remove("hidden"),this.container.querySelector("#hex-error").classList.add("hidden"),this.container.querySelector("#hex-success").classList.add("hidden"),this.container.querySelector("#generate-hex").disabled=!0}showError(e){this.container.querySelector("#hex-error-message").textContent=e,this.container.querySelector("#hex-error").classList.remove("hidden"),this.container.querySelector("#hex-loading").classList.add("hidden"),this.container.querySelector("#hex-success").classList.add("hidden"),this.container.querySelector("#generate-hex").disabled=!1}}window.QuantumHexTool=QuantumHexTool;