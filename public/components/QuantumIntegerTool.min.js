class QuantumIntegerTool{constructor(e){this.container=document.getElementById(e),this.results=[],this.init()}init(){this.container.innerHTML='\n        <h3 class="bento-tool-title">ğŸ”¢ Random Integers</h3>\n        <p class="bento-tool-description">Generate random integers within any range using quantum randomness</p>\n        \n        <div style="display: flex; flex-direction: column; gap: 1rem; margin-top: 1.5rem;">\n          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">\n            <div>\n              <label for="int-min" class="block text-sm font-bold text-gray-700 mb-1">Minimum Value</label>\n              <input type="number" id="int-min" value="1" min="-999999" max="999999" placeholder="e.g., 1" \n                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm text-gray-800 font-mono">\n            </div>\n            \n            <div>\n              <label for="int-max" class="block text-sm font-bold text-gray-700 mb-1">Maximum Value</label>\n              <input type="number" id="int-max" value="100" min="-999999" max="999999" placeholder="e.g., 100"\n                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm text-gray-800 font-mono">\n            </div>\n          </div>\n          \n          <div>\n            <label for="int-count" class="block text-sm font-bold text-gray-700 mb-1">How many numbers?</label>\n            <input type="number" id="int-count" value="10" min="1" max="100" placeholder="1-100"\n              class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-quantum-light focus:border-quantum-light outline-none transition-all shadow-sm text-gray-800 font-mono">\n            <span class="body-small" style="color: var(--text-tertiary); display: block; margin-top: 0.25rem;">Maximum 100 numbers per generation</span>\n          </div>\n          \n          <div class="flex gap-6 items-center mt-3">\n            <label class="flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-gray-50 transition-colors">\n              <input type="checkbox" id="int-unique" class="w-5 h-5 rounded border-gray-300 focus:ring-quantum-light cursor-pointer" style="accent-color: var(--quantum-light, #8b5cf6);" />\n              <span class="font-medium text-gray-700">Unique values only</span>\n            </label>\n            \n            <label class="flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-gray-50 transition-colors">\n              <input type="checkbox" id="int-sort" class="w-5 h-5 rounded border-gray-300 focus:ring-quantum-light cursor-pointer" style="accent-color: var(--quantum-light, #8b5cf6);" />\n              <span class="font-medium text-gray-700">Sort results</span>\n            </label>\n          </div>\n          \n          <button id="generate-integers" class="btn-primary generate-btn">\n            <span>âš›ï¸</span>\n            Generate Quantum Integers\n          </button>\n        </div>\n          \n        \n        <div id="int-loading" class="hidden" style="margin-top: 2rem;">\n          <div class="loading-spinner"></div>\n          <p class="body-medium text-center" style="color: var(--text-secondary);">Generating quantum integers...</p>\n        </div>\n        \n        <div id="int-error" class="hidden" style="margin-top: 2rem; padding: 1rem; background: #fef2f2; border: 1px solid #fecaca; border-radius: 12px;">\n          <div style="display: flex; align-items: flex-start; gap: 0.75rem;">\n            <span style="font-size: 1.5rem;">âš ï¸</span>\n            <div>\n              <h4 class="headline-small" style="color: #dc2626; margin-bottom: 0.25rem;">Error</h4>\n              <p class="body-medium" style="color: #6b7280;" id="int-error-message"></p>\n            </div>\n          </div>\n        </div>\n        \n        <div id="int-success" class="hidden">\n          <div class="result-display">\n            <div class="result-label">Generated Integers</div>\n            <div class="integer-results-grid" id="integer-results-list" style="margin-top: 1rem;">\n              \x3c!-- Results will be populated here --\x3e\n            </div>\n          </div>\n          \n          <div style="display: flex; gap: 0.75rem; justify-content: center; margin-top: 1rem; flex-wrap: wrap;">\n            <button id="copy-all-integers" class="btn-secondary" style="font-size: 0.875rem; padding: 0.625rem 1.25rem;">\n              ğŸ“‹ Copy All\n            </button>\n            <button id="download-integers" class="btn-secondary" style="font-size: 0.875rem; padding: 0.625rem 1.25rem;">\n              ğŸ’¾ Download\n            </button>\n          </div>\n          \n          <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; flex-wrap: wrap;">\n            <span class="body-small" style="color: var(--text-secondary);">Range: <strong id="int-range-display" style="color: var(--text-primary);"></strong></span>\n            <span class="body-small" style="color: var(--text-secondary);">Count: <strong id="int-count-display" style="color: var(--text-primary);"></strong></span>\n            <span class="body-small" style="color: var(--text-secondary);">Time: <strong id="int-timestamp" style="color: var(--text-primary);"></strong></span>\n          </div>\n        </div>\n      </div>',this.bindEvents()}bindEvents(){const e=this.container.querySelector("#generate-integers"),t=this.container.querySelector("#copy-all-integers"),n=this.container.querySelector("#download-integers"),r=this.container.querySelector("#int-min"),s=this.container.querySelector("#int-max");e.addEventListener("click",()=>this.generateIntegers()),t.addEventListener("click",()=>this.copyAllResults()),n.addEventListener("click",()=>this.downloadResults()),r.addEventListener("change",()=>{const e=parseInt(r.value);e>parseInt(s.value)&&(s.value=e)}),s.addEventListener("change",()=>{const e=parseInt(r.value),t=parseInt(s.value);t<e&&(r.value=t)}),this.container.querySelectorAll("input").forEach(e=>{e.addEventListener("keypress",e=>{"Enter"===e.key&&this.generateIntegers()})})}async generateIntegers(){const e=parseInt(this.container.querySelector("#int-min").value),t=parseInt(this.container.querySelector("#int-max").value),n=parseInt(this.container.querySelector("#int-count").value),r=this.container.querySelector("#int-unique").checked,s=this.container.querySelector("#int-sort").checked;if(isNaN(e)||isNaN(t)||isNaN(n))this.showError("Please enter valid numbers for all fields");else if(e>t)this.showError("Minimum value cannot be greater than maximum value");else if(n<1||n>100)this.showError("Count must be between 1 and 100");else if(r&&t-e+1<n)this.showError(`Cannot generate ${n} unique values in range [${e}, ${t}] (only ${t-e+1} possible values)`);else{this.showLoading();try{const i=t-e+1,a=r?Math.max(n,2*n):n,o=await qrngService.getUint16(a),l=[],c=new Set;for(const t of o){const s=e+t%i;if(r?c.has(s)||(l.push(s),c.add(s)):l.push(s),l.length>=n)break}for(;r&&l.length<n;){const t=await qrngService.getUint16(2*n);for(const r of t){const t=e+r%i;if(!c.has(t)&&(l.push(t),c.add(t),l.length>=n))break}}s&&l.sort((e,t)=>e-t),this.results=l.slice(0,n),this.showResults(),qrngService.emit("tool_usage",{tool:"integer",range:[e,t],count:n,unique:r,sort:s})}catch(e){console.error("Integer generation error:",e),this.showError(`Failed to generate integers: ${e.message}`)}}}showLoading(){this.container.querySelector("#int-loading").classList.remove("hidden"),this.container.querySelector("#int-error").classList.add("hidden"),this.container.querySelector("#int-success").classList.add("hidden"),this.container.querySelector("#generate-integers").disabled=!0}showError(e){this.container.querySelector("#int-error-message").textContent=e,this.container.querySelector("#int-error").classList.remove("hidden"),this.container.querySelector("#int-loading").classList.add("hidden"),this.container.querySelector("#int-success").classList.add("hidden"),this.container.querySelector("#generate-integers").disabled=!1}showResults(){const e=parseInt(this.container.querySelector("#int-min").value),t=parseInt(this.container.querySelector("#int-max").value),n=this.results.length;this.container.querySelector("#int-range-display").textContent=`${e} - ${t}`,this.container.querySelector("#int-count-display").textContent=n,this.container.querySelector("#int-timestamp").textContent=(new Date).toLocaleTimeString();const r=this.container.querySelector("#integer-results-list");r.innerHTML="",this.results.forEach((e,t)=>{const n=document.createElement("div");n.className="integer-item",n.textContent=e,n.dataset.value=e,n.title="Click to copy",n.addEventListener("click",()=>{this.copyValue(e,n)}),r.appendChild(n)}),this.container.querySelector("#int-success").classList.remove("hidden"),this.container.querySelector("#int-loading").classList.add("hidden"),this.container.querySelector("#int-error").classList.add("hidden"),this.container.querySelector("#generate-integers").disabled=!1}async copyAllResults(){const e=this.results.join("\n");try{await navigator.clipboard.writeText(e),this.showCopyFeedback(this.container.querySelector("#copy-all-integers"))}catch(e){console.error("Copy failed:",e)}}async copyValue(e,t){try{await navigator.clipboard.writeText(e),t&&(t.classList.add("copied"),setTimeout(()=>{t.classList.remove("copied")},1e3))}catch(e){console.error("Copy failed:",e)}}showCopyFeedback(e){const t=e.textContent;e.textContent="âœ…",e.style.background="var(--green)",e.style.color="var(--white)",setTimeout(()=>{e.textContent=t,e.style.background="",e.style.color=""},1500)}downloadResults(){const e=parseInt(this.container.querySelector("#int-min").value),t=parseInt(this.container.querySelector("#int-max").value),n=`Quantum Random Integers\nGenerated: ${(new Date).toISOString()}\nRange: [${e}, ${t}]\nCount: ${this.results.length}\n\nResults:\n${this.results.map((e,t)=>`${t+1}. ${e}`).join("\n")}\n\n---\nGenerated using ANU Quantum Random Number Generator\nSource: Quantum Random Lab`,r=new Blob([n],{type:"text/plain"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`quantum-integers-${Date.now()}.txt`,i.click(),URL.revokeObjectURL(s)}}window.QuantumIntegerTool=QuantumIntegerTool;