class QuantumPasswordTool{constructor(e){this.container=document.getElementById(e),this.currentPassword="",this.strength={score:0,level:"Weak"},this.init()}init(){this.container.innerHTML='\n      <div id="password-tool-card" class="relative w-full max-w-5xl mx-auto rounded-3xl shadow-2xl overflow-hidden transition-all duration-700 bg-gray-100 min-h-[600px] flex flex-col justify-center">\n        \n        \x3c!-- Animated Background Layer --\x3e\n        <div id="bg-layer" class="absolute inset-0 z-0 transition-opacity duration-700 ease-in-out bg-cover bg-center opacity-30" \n             style="background-image: url(\'/assets/images/pwd-strength-1.png\');">\n        </div>\n        \n        \x3c!-- Content Layer --\x3e\n        <div class="relative z-10 w-full max-w-3xl mx-auto p-6 md:p-12">\n          \n          \x3c!-- Header --\x3e\n          <div class="text-center mb-8 space-y-2">\n            <h2 class="text-3xl md:text-5xl font-extrabold text-gray-900 tracking-tight">Random Password Generator</h2>\n            <p class="text-gray-700 text-lg font-medium">Instantly create strong and secure passwords.</p>\n          </div>\n\n          \x3c!-- Glassmorphism Container for Controls --\x3e\n          <div class="bg-white/80 backdrop-blur-md rounded-2xl shadow-xl border border-white/50 p-6 md:p-8 space-y-8">\n            \n            \x3c!-- Password Display Section --\x3e\n            <div class="relative group">\n              <div class="absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-quantum-light rounded-2xl opacity-20 group-hover:opacity-40 transition duration-500"></div>\n              <div class="relative flex flex-col md:flex-row gap-4">\n                <div class="relative flex-grow">\n                  <input type="text" id="password-output" readonly \n                    class="w-full pl-6 pr-32 py-4 md:py-5 text-xl md:text-2xl font-mono text-gray-800 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all shadow-inner"\n                    value="Generating...">\n                  \n                  <div class="absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2">\n                    <span id="strength-badge" class="hidden sm:inline-block px-2 py-1 rounded text-xs font-bold uppercase tracking-wider bg-gray-100 text-gray-500">Init</span>\n                    <button id="regenerate-btn" class="p-2 text-gray-400 hover:text-blue-600 transition-colors rounded-full hover:bg-blue-50" title="Regenerate">\n                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n                \n                <button id="copy-btn" class="w-full md:w-auto bg-[#0066FF] hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-blue-500/30 transition-all transform active:scale-95 text-lg flex items-center justify-center gap-2">\n                  <span>Copy</span>\n                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n                    <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />\n                    <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            \x3c!-- Controls Grid --\x3e\n            <div class="grid gap-8">\n              \n              \x3c!-- Length Slider Row --\x3e\n              <div class="grid md:grid-cols-[160px_1fr] gap-4 items-center">\n                 <label class="text-gray-700 font-bold text-lg flex items-center gap-2">\n                   Length: <span id="length-display" class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-lg">12</span>\n                 </label>\n                 \n                 <div class="flex items-center gap-4 bg-gray-50 p-2 rounded-lg border border-gray-100">\n                    <button id="decrease-length" class="w-8 h-8 rounded-full bg-white text-gray-600 shadow-sm border border-gray-200 hover:border-blue-400 hover:text-blue-500 font-bold transition-all text-xl leading-none flex items-center justify-center pb-1">-</button>\n                    <input type="range" id="length-slider" min="4" max="64" value="12" \n                           class="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-[#0066FF] hover:accent-blue-600 transition-all">\n                    <button id="increase-length" class="w-8 h-8 rounded-full bg-white text-gray-600 shadow-sm border border-gray-200 hover:border-blue-400 hover:text-blue-500 font-bold transition-all text-xl leading-none flex items-center justify-center pb-1">+</button>\n                 </div>\n              </div>\n\n              \x3c!-- Character Options Row --\x3e\n              <div class="grid md:grid-cols-[160px_1fr] gap-4 items-start">\n                <span class="text-gray-700 font-bold text-lg pt-1">Characters:</span>\n                \n                <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">\n                  <label class="flex items-center gap-2 cursor-pointer bg-white border-2 border-transparent hover:border-blue-100 rounded-lg p-2 transition-all">\n                    <div class="relative flex items-center justify-center w-5 h-5">\n                      <input type="checkbox" id="char-uppercase" checked class="peer appearance-none w-5 h-5 border-2 border-gray-300 rounded bg-white checked:bg-blue-500 checked:border-blue-500 transition-all cursor-pointer">\n                      <svg class="absolute w-3 h-3 text-white opacity-0 peer-checked:opacity-100 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>\n                    </div>\n                    <span class="text-gray-700 font-medium">ABC</span>\n                  </label>\n                  \n                  <label class="flex items-center gap-2 cursor-pointer bg-white border-2 border-transparent hover:border-blue-100 rounded-lg p-2 transition-all">\n                    <div class="relative flex items-center justify-center w-5 h-5">\n                      <input type="checkbox" id="char-lowercase" checked class="peer appearance-none w-5 h-5 border-2 border-gray-300 rounded bg-white checked:bg-blue-500 checked:border-blue-500 transition-all cursor-pointer">\n                      <svg class="absolute w-3 h-3 text-white opacity-0 peer-checked:opacity-100 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>\n                    </div>\n                    <span class="text-gray-700 font-medium">abc</span>\n                  </label>\n                  \n                  <label class="flex items-center gap-2 cursor-pointer bg-white border-2 border-transparent hover:border-blue-100 rounded-lg p-2 transition-all">\n                    <div class="relative flex items-center justify-center w-5 h-5">\n                      <input type="checkbox" id="char-numbers" checked class="peer appearance-none w-5 h-5 border-2 border-gray-300 rounded bg-white checked:bg-blue-500 checked:border-blue-500 transition-all cursor-pointer">\n                      <svg class="absolute w-3 h-3 text-white opacity-0 peer-checked:opacity-100 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>\n                    </div>\n                    <span class="text-gray-700 font-medium">123</span>\n                  </label>\n                  \n                  <label class="flex items-center gap-2 cursor-pointer bg-white border-2 border-transparent hover:border-blue-100 rounded-lg p-2 transition-all">\n                    <div class="relative flex items-center justify-center w-5 h-5">\n                      <input type="checkbox" id="char-symbols" class="peer appearance-none w-5 h-5 border-2 border-gray-300 rounded bg-white checked:bg-blue-500 checked:border-blue-500 transition-all cursor-pointer">\n                      <svg class="absolute w-3 h-3 text-white opacity-0 peer-checked:opacity-100 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>\n                    </div>\n                    <span class="text-gray-700 font-medium">#$&</span>\n                  </label>\n                </div>\n              </div>\n\n            </div>\n\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Footer Note --\x3e\n      <p class="text-center text-gray-400 mt-6 text-xs max-w-2xl mx-auto">\n        ðŸ”’ Generated using <a href="https://quantumnumbers.anu.edu.au/" target="_blank" class="hover:text-blue-500 underline decoration-dotted">ANU Quantum Random Numbers</a>. \n        Data is fetched securely via HTTPS.\n      </p>\n    ',this.bindEvents(),this.generatePassword()}bindEvents(){const e={regenerateBtn:this.container.querySelector("#regenerate-btn"),copyBtn:this.container.querySelector("#copy-btn"),lengthSlider:this.container.querySelector("#length-slider"),decreaseLength:this.container.querySelector("#decrease-length"),increaseLength:this.container.querySelector("#increase-length"),checkboxes:this.container.querySelectorAll('input[type="checkbox"]')};e.regenerateBtn.addEventListener("click",()=>this.generatePassword()),e.copyBtn.addEventListener("click",()=>this.copyPassword());const t=t=>{let n=parseInt(t);n<4&&(n=4),n>64&&(n=64),e.lengthSlider.value=n,this.container.querySelector("#length-display").textContent=n,this.generatePassword()};e.lengthSlider.addEventListener("input",e=>t(e.target.value)),e.decreaseLength.addEventListener("click",()=>t(parseInt(e.lengthSlider.value)-1)),e.increaseLength.addEventListener("click",()=>t(parseInt(e.lengthSlider.value)+1)),e.checkboxes.forEach(t=>{t.addEventListener("change",()=>{0!==Array.from(e.checkboxes).filter(e=>e.checked).length?this.generatePassword():t.checked=!0})})}async generatePassword(){const e=parseInt(this.container.querySelector("#length-slider").value),t=this.container.querySelector("#char-uppercase").checked,n=this.container.querySelector("#char-lowercase").checked,r=this.container.querySelector("#char-numbers").checked,a=this.container.querySelector("#char-symbols").checked,s=this.container.querySelector("#regenerate-btn svg");s.classList.add("animate-spin");try{let s="";t&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),n&&(s+="abcdefghijklmnopqrstuvwxyz"),r&&(s+="0123456789"),a&&(s+="!@#$%^&*()_+-=[]{}|;:,.<>?");const o=await qrngService.getUint8(e);let l="";for(let t=0;t<e;t++){l+=s[o[t]%s.length]}this.currentPassword=l,this.updateUI(l)}catch(e){console.error("Generation failed",e),this.currentPassword="Error-Generating"}finally{setTimeout(()=>s.classList.remove("animate-spin"),500)}}updateUI(e){this.container.querySelector("#password-output").value=e;const t=this.calculateStrength(e);this.updateStrengthBadge(t),this.updateImage(t)}calculateStrength(e){let t=0;const n=e.length;t+=n<8?10:n<12?40:n<16?70:90,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&(t+=10),/[0-9]/.test(e)&&(t+=10),/[^a-zA-Z0-9]/.test(e)&&(t+=20);let r="Weak",a="text-red-500 bg-red-100";return t<40?(r="Very Weak",a="text-red-600 bg-red-100"):t<70?(r="Weak",a="text-orange-600 bg-orange-100"):t<90?(r="Strong",a="text-green-600 bg-green-100"):(r="Very Strong",a="text-emerald-800 bg-emerald-100"),{level:r,color:a,score:t}}updateStrengthBadge(e){const t=this.container.querySelector("#strength-badge");t.textContent=e.level,t.className=`hidden sm:inline-block px-2 py-1 rounded text-xs font-bold uppercase tracking-wider transition-colors duration-300 ${e.color}`}updateImage(e){const t=this.container.querySelector("#bg-layer");let n="/assets/images/pwd-strength-1.png";"Very Weak"===e.level?n="/assets/images/pwd-strength-1.png":"Weak"===e.level?n="/assets/images/pwd-strength-2.png":"Strong"===e.level?n="/assets/images/pwd-strength-3.png":"Very Strong"===e.level&&(n="/assets/images/pwd-strength-4.png");const r=new Image;r.src=n,r.onload=()=>{t.style.backgroundImage=`url('${n}')`}}async copyPassword(){try{await navigator.clipboard.writeText(this.currentPassword);const e=this.container.querySelector("#copy-btn"),t=e.innerHTML;e.innerHTML='<span class="flex items-center gap-2">âœ… <span>Copied!</span></span>',e.classList.add("bg-green-600","hover:bg-green-700"),setTimeout(()=>{e.innerHTML=t,e.classList.remove("bg-green-600","hover:bg-green-700")},2e3)}catch(e){console.error("Copy failed",e)}}}window.QuantumPasswordTool=QuantumPasswordTool;